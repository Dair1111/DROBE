<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scan Complete - DROBE</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background-color: white;
      background-image: radial-gradient(circle, #555555 1px, transparent 1px);
      background-size: 50px 50px;
      background-attachment: fixed;
      font-family: quasimoda, sans-serif;
      font-style: normal;
      font-weight: 100;
    }

    /* ====== TOP NAVBAR (MATCH OTHER PAGES) ====== */
    header {
      position: sticky;
      top: 0;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(6px);
    }

    .nav-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 35px;
    }

    .logo {
      font-size: 13px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      text-decoration: none;
      color: #111;
    }

    nav ul {
      margin: 0;
      padding: 0;
      list-style: none;
    }

    .menu {
      display: flex;
      gap: 32px;
      align-items: center;
    }

    .menu > li,
    .right-nav .account {
      position: relative;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      white-space: nowrap;
    }

    .menu > li > a,
    .right-nav .account > a {
      text-decoration: none;
      color: #111;
      padding: 4px 0;
      display: inline-block;
      border-bottom: 1px solid transparent;
    }

    .menu > li > a:hover,
    .right-nav .account > a:hover {
      border-bottom-color: #111;
    }

    .submenu {
      position: absolute;
      top: 100%;
      left: 0;
      min-width: 180px;
      background: #fff;
      border: 1px solid #ddd;
      padding: 8px 0;
      margin: 0;
      display: none;
      z-index: 1100;
      list-style: none;
    }

    .submenu li {
      position: relative;
      font-size: 12px;
      text-transform: none;
      letter-spacing: 0.04em;
      padding: 4px 16px;
      cursor: pointer;
      white-space: nowrap;
      list-style: none;
    }

    .submenu li a {
      text-decoration: none;
      color: #111;
      display: block;
      padding: 4px 0;
    }

    .submenu li:hover {
      background: #f3f3f3;
    }

    .menu > li:hover > .submenu,
    .menu > li:focus-within > .submenu {
      display: block;
    }

    .submenu .submenu {
      top: 0;
      left: 100%;
      margin-left: 4px;
    }

    .submenu li:hover > .submenu,
    .submenu li:focus-within > .submenu {
      display: block;
    }

    .right-nav {
      display: flex;
      align-items: center;
      gap: 24px;
    }

    .right-nav .account {
      position: relative;
    }

    .right-nav .account .submenu {
      right: 0;
      left: auto;
    }

    .right-nav .account:hover .submenu,
    .right-nav .account:focus-within .submenu {
      display: block;
    }

    /* ====== PAGE LAYOUT FOR SCAN CONTENT ====== */
    .scan-page-wrapper {
      min-height: calc(100vh - 70px);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .demo-container {
      max-width: 500px;
      width: 100%;
      text-align: center;
    }

    .success-animation {
      width: 80px;
      height: 80px;
      background: #111;
      border-radius: 50%;
      margin: 0 auto 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: scaleIn 0.5s ease-out;
    }

    .success-animation svg {
      width: 40px;
      height: 40px;
      color: white;
    }

    @keyframes scaleIn {
      from {
        transform: scale(0);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    .demo-content {
      background: white;
      border: 1px solid #eee;
      padding: 40px;
      margin-bottom: 20px;
    }

    h1 {
      font-size: 24px;
      font-weight: 100;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-bottom: 15px;
    }

    .item-preview {
      background: #f8f8f8;
      padding: 25px;
      margin: 25px 0;
      border-radius: 4px;
    }

    .item-preview img {
      max-width: 200px;
      height: auto;
      margin-bottom: 15px;
    }

    .item-details {
      font-size: 14px;
      line-height: 1.5;
      color: #333;
    }

    .item-details strong {
      display: block;
      font-size: 16px;
      margin-bottom: 5px;
    }

    .demo-text {
      font-size: 14px;
      color: #666;
      line-height: 1.6;
      margin: 25px 0;
    }

    .next-steps {
      background: #f8f8f8;
      padding: 20px;
      margin: 25px 0;
      border-left: 3px solid #111;
      text-align: left;
    }

    .next-steps h3 {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 10px;
    }

    .next-steps ul {
      text-align: left;
      font-size: 13px;
      color: #666;
      line-height: 1.5;
      padding-left: 18px;
      margin: 0;
    }

    .demo-buttons {
      display: flex;
      gap: 15px;
      margin-top: 30px;
    }

    .primary-button {
      background: #111;
      color: white;
      border: none;
      padding: 14px 28px;
      font-family: quasimoda, sans-serif;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      flex: 1;
      transition: background 0.3s ease;
      text-decoration: none;
      display: inline-block;
      text-align: center;
    }

    .primary-button:hover {
      background: #333;
    }

    .secondary-button {
      background: transparent;
      color: #111;
      border: 1px solid #111;
      padding: 14px 28px;
      font-family: quasimoda, sans-serif;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      flex: 1;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
      text-align: center;
    }

    .secondary-button:hover {
      background: #111;
      color: white;
    }
  </style>
</head>
<body>

  <!-- TOP NAVBAR -->
  <header>
    <div class="nav-inner">
      <a href="index.html" class="logo">DROBE</a>

      <nav>
        <ul class="menu">
          <!-- BROWSE -->
          <li>
            <a href="#">Browse</a>
            <ul class="submenu">
              <li><a href="index.html">All</a></li>
              <li>
                Category
                <ul class="submenu">
                  <li><a href="#" class="category-link" data-category="tops">Tops</a></li>
                  <li><a href="#" class="category-link" data-category="outerwears">Outerwears</a></li>
                  <li><a href="#" class="category-link" data-category="bottoms">Bottoms</a></li>
                  <li><a href="#" class="category-link" data-category="dresses">Dresses</a></li>
                  <li><a href="#" class="category-link" data-category="shoes">Shoes</a></li>
                  <li><a href="#" class="category-link" data-category="accessories">Accessories</a></li>
                  <li><a href="#" class="category-link" data-category="bags">Bags</a></li>
                  <li><a href="#" class="category-link" data-category="whatifs">What ifs</a></li>
                </ul>
              </li>
            </ul>
          </li>

          <!-- PAIR -->
          <li>
            <a href="#">Pair</a>
            <ul class="submenu">
              <li><a href="scroll&select.html">Scroll &amp; Select</a></li>
              <li><a href="layer-preview.html">Layer &amp; Preview</a></li>
            </ul>
          </li>

          <!-- PLAN -->
          <li>
            <a href="#">Plan</a>
            <ul class="submenu">
              <li>
                <a href="#">Saved looks</a>
                <ul class="submenu">
                  <li><a href="savedlooks.html">Mine</a></li>
                  <li><a href="#">Others / Inspirations</a></li>
                </ul>
              </li>
              <li><a href="#">Calendar</a></li>
            </ul>
          </li>

          <!-- ADD -->
          <li>
            <a href="#">Add</a>
            <ul class="submenu">
              <li><a href="additem.html">Upload</a></li>
              <li><a href="#">Shop</a></li>
            </ul>
          </li>

          <!-- ANALYSIS -->
          <li>
            <a href="#">Analysis</a>
            <ul class="submenu">
              <li><a href="#">Overview</a></li>
              <li><a href="#">Wear Frequency / Unworn Items</a></li>
              <li><a href="#">Spending</a></li>
            </ul>
          </li>

          <!-- EXPLORE -->
          <li>
            <a href="#">Explore</a>
            <ul class="submenu">
              <li><a href="#">Sell / Explore / Buy</a></li>
            </ul>
          </li>
        </ul>
      </nav>

      <div class="right-nav">
        <div class="account">
          <a href="#">Account</a>
          <ul class="submenu">
            <li><a href="#">Settings</a></li>
            <li><a href="#">Help &amp; Feedback</a></li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <!-- SCAN CONTENT -->
  <main class="scan-page-wrapper">
    <div class="demo-container">
      <div class="success-animation">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M20 6L9 17l-5-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>

      <div class="demo-content">
        <h1>Item Scanned</h1>
        
        <div class="item-preview">
          <img id="itemImage" src="acc8.png" alt="Scanned Item">
          <div class="item-details" id="itemDetails">
            <!-- Populated by JavaScript -->
          </div>
        </div>

        <p class="demo-text" id="demoText">
          This item has been automatically added to your DROBE archive. The QR code recognized the brand and pre-filled all the details for you.
        </p>

        <div class="next-steps">
          <h3>What happens next:</h3>
          <ul>
            <li>Item is now searchable in your digital closet</li>
            <li>Create outfits with this item</li>
            <li>Wear tracking and cost analysis</li>
            <li>Sell this item to other users</li>
          </ul>
        </div>

        <div class="demo-buttons">
          <a href="index.html" class="primary-button" id="viewClosetBtn">View in My Closet</a>
          <a href="additem.html" class="secondary-button">Add Another Item</a>
        </div>
      </div>
    </div>
  </main>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const itemIdParam = urlParams.get('itemId');

    const items = JSON.parse(localStorage.getItem('drobeItems') || '[]');
    let item = null;

    if (itemIdParam) {
      item = items.find(
        it => String(it.id) === itemIdParam || it.id === Number(itemIdParam)
      );
    }

    // Fallback: try last added item if no id or not found
    if (!item) {
      const lastId = localStorage.getItem('drobeLastAddedItemId');
      if (lastId) {
        item = items.find(
          it => String(it.id) === lastId || it.id === Number(lastId)
        );
      }
    }

    const itemImageEl = document.getElementById('itemImage');
    const itemDetailsEl = document.getElementById('itemDetails');
    const titleEl = document.querySelector('h1');
    const demoTextEl = document.getElementById('demoText');

    if (item) {
      const displayName = item.description || item.brand || 'New item';

      titleEl.textContent = `${displayName} Added`;

      if (item.imageDataUrl) {
        itemImageEl.src = item.imageDataUrl;
        itemImageEl.alt = displayName;
      }

      const tagsText = item.tags && item.tags.length
        ? item.tags.join(', ')
        : 'None';

      itemDetailsEl.innerHTML = `
        <strong>${displayName}</strong>
        Brand: ${item.brand || '—'}<br>
        Category: ${item.category || '—'}<br>
        Description: ${item.description || '—'}<br>
        Tags: ${tagsText}<br>
        Added: ${item.createdAt ? new Date(item.createdAt).toLocaleString() : 'Just now'}
      `;

      demoTextEl.textContent =
        'This item has been added to your DROBE archive. You can now find it in your closet grid and start pairing it into looks.';
    } else {
      // If nothing found, show a generic fallback
      itemDetailsEl.innerHTML = `
        <strong>New item</strong>
        We couldn’t find detailed info for this item in your archive.
        It may not have been saved correctly.
      `;
    }

    // Add interactive feedback to primary button
    const viewBtn = document.getElementById('viewClosetBtn');
    viewBtn.addEventListener('click', function(e) {
      e.preventDefault();
      this.textContent = 'Opening Archive...';
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 800);
    });
  </script>
</body>
</html>
